"use strict";(self.webpackChunklego=self.webpackChunklego||[]).push([[359],{94660:function(e,s,r){r(72791);s.Z=r.p+"static/media/LEGOAccount-Logo.ed093d4e8f43ce1e32a1ba6a8aef2989.svg"},12359:function(e,s,r){r.r(s),r.d(s,{default:function(){return w}});var a=r(1413),o=r(29439),t=r(72791),i=r(94660);var n=r.p+"static/media/close.9f829dbea39731db81140261f0f3f969.svg",l=r(12161),c=r(68096),d=r(48550),u=r(64554),m=r(55705),h=r(62797),p=r(74569),f=r.n(p),x=r(30456),v=(r(25158),r(43504)),g=r(16871),Z=r(55646),j=r(94070),b=r(80184);var w=function(){var e=(0,t.useState)(!1),s=(0,o.Z)(e,2),r=s[0],p=s[1],w=(0,g.s0)(),y=(0,g.TH)(),N=(0,t.useState)(!1),k=(0,o.Z)(N,2),C=k[0],P=k[1],S=(0,t.useState)(!1),L=(0,o.Z)(S,2),T=L[0],E=L[1],A=(0,t.useState)(""),O=(0,o.Z)(A,2),q=O[0],F=O[1],D=function(e,s){"clickaway"!==s&&E(!1)},G=function(e,s){"clickaway"!==s&&P(!1)},H=(0,m.TA)({initialValues:{email:"",password:""},validationSchema:h.Ry({email:h.Z_().email("invalid email address").required("email is required"),password:h.Z_().required("password is required")}),onSubmit:function(e){p(!0),f().post("https://lego-team5.herokuapp.com/login",e).then((function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("refreshToken",e.data.refreshToken);var s=(0,x.Z)(e.data.token).role;p(!1),w("admin"===s?"/dashboard":"shipper"===s?"/shipper":"/home",{state:{message:e.data.message}})})).catch((function(e){var s;p(!1),s=e.response.data.Error,F(s),E(!0)}))}});return(0,t.useEffect)((function(){var e,s;null!==y&&void 0!==y&&null!==(e=y.state)&&void 0!==e&&e.message&&(s=y.state.message,F(s),P(!0))}),[]),(0,b.jsxs)(b.Fragment,{children:[r&&(0,b.jsxs)("div",{className:"inner-loader",children:[(0,b.jsx)("h1",{children:"Logging you in please hold"}),(0,b.jsxs)("div",{className:"lds-ring",children:[(0,b.jsx)("div",{}),(0,b.jsx)("div",{}),(0,b.jsx)("div",{}),(0,b.jsx)("div",{})]})]}),!r&&(0,b.jsxs)("div",{className:"auth-wrapper",children:[(0,b.jsxs)("div",{className:"login-container",children:[(0,b.jsxs)("div",{className:"header",children:[(0,b.jsx)("div",{className:"title",children:(0,b.jsx)("img",{src:i.Z,alt:"Lego Logo"})}),(0,b.jsx)("div",{className:"close",children:(0,b.jsx)(v.OL,{to:"/home",children:(0,b.jsx)("img",{src:n,alt:"close button"})})})]}),(0,b.jsx)("div",{className:"logo",children:(0,b.jsx)("img",{src:l,alt:""})}),(0,b.jsxs)(u.Z,{component:"form",className:"lego-form",noValidate:!0,autoComplete:"off",onSubmit:H.handleSubmit,children:[(0,b.jsx)(c.Z,{sx:{width:"100%",px:3,mb:2},children:(0,b.jsx)(d.Z,(0,a.Z)({helperText:H.touched.email&&H.errors.email?"".concat(H.errors.email):null,error:!(!H.touched.email||!H.errors.email),id:"demo-helper-text-misaligned",label:"Email"},H.getFieldProps("email")))}),(0,b.jsx)(c.Z,{sx:{width:"100%",px:3,mb:2},children:(0,b.jsx)(d.Z,(0,a.Z)({helperText:H.touched.password&&H.errors.password?"".concat(H.errors.password):null,error:!(!H.touched.password||!H.errors.password),id:"standard-error-helper-text",label:"Password",type:"password"},H.getFieldProps("password")))}),(0,b.jsx)("p",{className:"logout-advice",children:"Remember to log out afterwards if you are using a shared computer, for example in a library or school."}),(0,b.jsx)("button",{type:"submit",className:"login-button",children:"Log in"})]}),(0,b.jsxs)("div",{className:"go-signup",children:[(0,b.jsx)("p",{children:"Don't have a LEGO\xae Account?"}),(0,b.jsx)(v.OL,{to:"/signup",children:"Create account"})]})]}),(0,b.jsx)(Z.Z,{open:T,autoHideDuration:3e3,onClose:D,severity:"error",children:(0,b.jsx)(j.Z,{onClose:D,severity:"error",sx:{width:"100%"},children:q})}),(0,b.jsx)(Z.Z,{open:C,autoHideDuration:3e3,onClose:G,severity:"success",children:(0,b.jsx)(j.Z,{onClose:G,severity:"success",sx:{width:"100%"},children:q})})]})]})}},64554:function(e,s,r){r.d(s,{Z:function(){return f}});var a=r(87462),o=r(63366),t=r(72791),i=r(28182),n=r(80594),l=r(60104),c=r(78519),d=r(30418),u=r(80184),m=["className","component"];var h=r(57829),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=e.defaultTheme,r=e.defaultClassName,h=void 0===r?"MuiBox-root":r,p=e.generateClassName,f=e.styleFunctionSx,x=void 0===f?l.Z:f,v=(0,n.ZP)("div")(x),g=t.forwardRef((function(e,r){var t=(0,d.Z)(s),n=(0,c.Z)(e),l=n.className,f=n.component,x=void 0===f?"div":f,g=(0,o.Z)(n,m);return(0,u.jsx)(v,(0,a.Z)({as:x,ref:r,className:(0,i.Z)(l,p?p(h):h),theme:t},g))}));return g}({defaultTheme:(0,r(83625).Z)(),defaultClassName:"MuiBox-root",generateClassName:h.Z.generate}),f=p},78519:function(e,s,r){r.d(s,{Z:function(){return c}});var a=r(93433),o=r(87462),t=r(63366),i=r(82466),n=r(46001),l=["sx"];function c(e){var s,r=e.sx,c=function(e){var s={systemProps:{},otherProps:{}};return Object.keys(e).forEach((function(r){n.Gc[r]?s.systemProps[r]=e[r]:s.otherProps[r]=e[r]})),s}((0,t.Z)(e,l)),d=c.systemProps,u=c.otherProps;return s=Array.isArray(r)?[d].concat((0,a.Z)(r)):"function"===typeof r?function(){var e=r.apply(void 0,arguments);return(0,i.P)(e)?(0,o.Z)({},d,e):d}:(0,o.Z)({},d,r),(0,o.Z)({},u,{sx:s})}},25158:function(){},12161:function(e,s,r){e.exports=r.p+"static/media/lego(1)large.66bf7c5b2dd151e35b9a.png"}}]);
//# sourceMappingURL=359.01bab520.chunk.js.map