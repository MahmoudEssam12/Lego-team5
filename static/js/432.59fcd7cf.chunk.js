"use strict";(self.webpackChunklego=self.webpackChunklego||[]).push([[432],{11358:function(e,t,n){n(72791);t.Z=n.p+"static/media/lego-logo.b02efc075a7a59e6ec97f8dfd58aa7f0.svg"},3432:function(e,t,n){n.r(t),n.d(t,{default:function(){return Mt}});var r=n(29439),o=n(4942),i=n(1413),a=n(72791),s=n(47630),c=n(83625),l=n(57012),d=n(4708),u=n(9953),h=n(64554),p=n(84395),x=n(34663),m=n(90493),Z=n(20890),g=n(94721),j=n(13400),f=n(26445),v=n(98008),b=n(31009),y=n(72627),S=n(57064),C=n(49900),k=n(79834),w=n(32338),P=n(32588),N=n(39122),_=n(2216),I=n(29454),D=n(49524),F=n(52797),B=n(39124),z=n(43896),A=n(39938),R=n(80184);function E(e){var t=e.value,n=e.handler,r=e.open;return(0,R.jsx)(a.Fragment,{children:(0,R.jsxs)(B.Z,{orientation:"vertical",value:t,onChange:n,"aria-label":"Vertical tabs example",sx:{borderRight:1,borderColor:"divider"},children:[(0,R.jsx)(z.Z,(0,i.Z)((0,i.Z)({label:r?"Dashboard":"",icon:(0,R.jsx)(w.Z,{}),iconPosition:"start"},(0,A.Z)(0)),{},{sx:{display:"flex",justifyContent:"flex-start"}})),(0,R.jsx)(z.Z,(0,i.Z)((0,i.Z)({label:r?"Orders":"",icon:(0,R.jsx)(P.Z,{}),iconPosition:"start"},(0,A.Z)(1)),{},{sx:{display:"flex",justifyContent:"flex-start"}})),(0,R.jsx)(z.Z,(0,i.Z)((0,i.Z)({label:r?"Products":"",icon:(0,R.jsx)(N.Z,{}),iconPosition:"start"},(0,A.Z)(2)),{},{sx:{display:"flex",justifyContent:"flex-start"}})),(0,R.jsx)(z.Z,(0,i.Z)((0,i.Z)({label:r?"Users":"",icon:(0,R.jsx)(_.Z,{}),iconPosition:"start"},(0,A.Z)(3)),{},{sx:{display:"flex",justifyContent:"flex-start"}})),(0,R.jsx)(z.Z,(0,i.Z)((0,i.Z)({label:r?"Shippers":"",icon:(0,R.jsx)(D.Z,{}),iconPosition:"start"},(0,A.Z)(4)),{},{sx:{display:"flex",justifyContent:"flex-start"}})),(0,R.jsx)(z.Z,(0,i.Z)((0,i.Z)({label:r?"Category":"",icon:(0,R.jsx)(I.Z,{}),iconPosition:"start"},(0,A.Z)(5)),{},{sx:{display:"flex",justifyContent:"flex-start"}}))]})})}a.Fragment,k.Z,y.Z,S.Z,F.Z,C.Z,y.Z,S.Z,F.Z,C.Z,y.Z,S.Z,F.Z,C.Z;var O=n(11358),T=n(43722),U=n(93433),q=n(13967),L=n(41286),W=n(5936),H=n(1065),M=n(48550),K=n(61889),G=n(36151),V=n(20792),J=n(94925),X=n(23786),Y=n(47071),Q=n(68096),$=n(68837),ee=n(55705),te=n(62797),ne=n(74569),re=n.n(ne),oe=n(91720),ie=n(97473),ae=n.n(ie),se=n(42763),ce=n(27888),le=n(55646),de=n(94070),ue=n(15927),he=n(57621),pe=n(42169),xe=n(39504),me=n(4110),Ze=n(72363),ge=n(872),je=n(86711);var fe=function(e){var t,n,o,s,c=e.product,l=e.deleteConfirm,d=e.showNotify,u=e.showErr,p=e.categories,x=(0,a.useState)(!1),m=(0,r.Z)(x,2),g=m[0],f=m[1],v=(0,a.useState)(c),b=(0,r.Z)(v,2),y=b[0],S=b[1],C=(0,a.useState)(!1),k=(0,r.Z)(C,2),w=(k[0],k[1]),P={headers:{"content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}},N=(0,ee.TA)({initialValues:{productName:y.name,price:y.price,amount:y.amount,updateCategory:null===(t=y.category)||void 0===t?void 0:t._id},validationSchema:te.Ry({productName:te.Z_().required("you can't set empty product name"),price:te.Rx().required("you can't set empty product price we are loosing money"),amount:te.Rx().required("you can't set empty product name you can set it 0 if u don't have stock")}),onSubmit:function(e){re().put("https://lego-team5.herokuapp.com/dashboard/products",{id:c._id,productName:e.productName,price:Number(e.price),amount:Number(e.amount),category:e.updateCategory},P).then((function(e){console.log(e),d(e.data.message),f(!1)})).catch((function(e){console.log(e),u("update faild")}))}});return(0,R.jsx)(K.ZP,{item:!0,xs:12,md:6,lg:4,children:(0,R.jsxs)(he.Z,{sx:{maxWidth:345},className:"admin-product-card",children:[(0,R.jsx)(pe.Z,{component:"img",height:"140",image:"".concat("https://lego-team5.herokuapp.com","/images/").concat(null!==(n=c.images)&&void 0!==n&&n.length?c.images[0]:""),alt:"".concat("https://lego-team5.herokuapp.com","/images/").concat(null!==(o=c.images)&&void 0!==o&&o.length?c.images[0]:"Not Found")}),(0,R.jsx)(xe.Z,{children:(0,R.jsx)(h.Z,{component:"form",onSubmit:N.handleSubmit,children:g?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(h.Z,{component:"div",children:[(0,R.jsx)("label",{children:"Name:"}),(0,R.jsx)(me.Z,(0,i.Z)((0,i.Z)({},N.getFieldProps("productName")),{},{error:!(!N.touched.productName||!N.errors.productName),"aria-describedby":"component-helper-text"})),(0,R.jsx)(Y.Z,{id:"component-helper-text",sx:{color:"red"},children:N.touched.productName&&N.errors.productName?"".concat(N.errors.productName):null})]}),(0,R.jsxs)(h.Z,{component:"div",children:[(0,R.jsx)("label",{children:"Price:"}),(0,R.jsx)(me.Z,(0,i.Z)((0,i.Z)({},N.getFieldProps("price")),{},{error:!(!N.touched.price||!N.errors.price),"aria-describedby":"component-helper-text"})),(0,R.jsx)(Y.Z,{id:"component-helper-text",sx:{color:"red"},children:N.touched.price&&N.errors.price?"".concat(N.errors.price):null})]}),(0,R.jsxs)(h.Z,{component:"div",children:[(0,R.jsx)("label",{children:"Amount:"}),(0,R.jsx)(me.Z,(0,i.Z)((0,i.Z)({},N.getFieldProps("amount")),{},{error:!(!N.touched.amount||!N.errors.amount),"aria-describedby":"component-helper-text"})),(0,R.jsx)(Y.Z,{id:"component-helper-text",sx:{color:"red"},children:N.touched.amount&&N.errors.amount?"".concat(N.errors.amount):null})]}),(0,R.jsxs)(Q.Z,{sx:{width:"100%",mt:2},error:!(!N.touched.price||!N.errors.price),children:[(0,R.jsx)(J.Z,{id:"updateCategory",children:"Category"}),(0,R.jsxs)($.Z,(0,i.Z)((0,i.Z)({fullWidth:!0,labelId:"updateCategory",id:"updateCategory",label:"Category",name:"updateCategory"},N.getFieldProps("updateCategory")),{},{children:[(0,R.jsx)(X.Z,{value:"",selected:!0,children:(0,R.jsx)("em",{children:"None"})}),p.map((function(e){return(0,R.jsx)(X.Z,{value:e._id,children:e.name},e._id)}))]})),(0,R.jsx)(Y.Z,{sx:{color:"red"},children:N.touched.category&&N.errors.category?"".concat(N.errors.category):null})]})]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(Z.Z,{gutterBottom:!0,variant:"h5",component:"div",children:N.values.productName}),(0,R.jsxs)(Z.Z,{variant:"h5",children:[N.values.price,"EGP"]}),(0,R.jsxs)(Z.Z,{variant:"body2",color:"text.secondary",children:["stock:",N.values.amount," ",0===Number(N.values.amount)?(0,R.jsx)("span",{style:{color:"red"},children:"out of stock"}):null]}),(0,R.jsxs)(Z.Z,{variant:"body2",color:"text.secondary",children:["Category:",null===(s=p.find((function(e){return Number(e._id)===Number(N.values.updateCategory)})))||void 0===s?void 0:s.name]})]})})}),(0,R.jsxs)(Ze.Z,{children:[g?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(j.Z,{"aria-label":"submit edit",onClick:N.handleSubmit,children:(0,R.jsx)(ge.Z,{color:"success"})}),(0,R.jsx)(j.Z,{"aria-label":"cancel edit",onClick:function(){S((0,i.Z)((0,i.Z)({},c),{},{name:c.name,price:c.price,amount:c.amount,category:c.category})),w(!1),f(!1)},children:(0,R.jsx)(je.Z,{color:"primary"})})]}):(0,R.jsx)(G.Z,{size:"small",onClick:function(){return f(!0)},children:"Edit"}),(0,R.jsx)(G.Z,{size:"small",onClick:function(){return l(c._id,c.name)},children:"Delete"})]})]})},c._id)},ve=n(16088),be=n(53767),ye=n(13239),Se=(0,s.ZP)("input")({display:"none"}),Ce=(0,s.ZP)("input")((function(e){var t=e.theme;return{width:200,backgroundColor:t.palette.background.paper,color:t.palette.getContrastText(t.palette.background.paper)}})),ke=(0,s.ZP)("ul")((function(e){return{width:200,margin:0,padding:0,zIndex:1,position:"absolute",listStyle:"none",backgroundColor:e.theme.palette.background.paper,overflow:"auto",maxHeight:200,border:"1px solid rgba(0,0,0,.25)",'& li[data-focus="true"]':{backgroundColor:"#4a8df6",color:"white",cursor:"pointer"},"& li:active":{backgroundColor:"#2977f5",color:"white"}}})),we={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};var Pe=function(){var e=(0,q.Z)(),t=(0,a.useState)(0),n=(0,r.Z)(t,2),o=n[0],s=n[1],c=(0,a.useState)(!1),l=(0,r.Z)(c,2),d=l[0],u=l[1],p=(0,a.useState)({}),x=(0,r.Z)(p,2),m=x[0],g=x[1],f=(0,a.useState)([]),v=(0,r.Z)(f,2),b=v[0],y=v[1],S=(0,a.useState)([]),C=(0,r.Z)(S,2),k=C[0],w=C[1],P=(0,a.useState)((0,U.Z)(k)),N=(0,r.Z)(P,2),_=N[0],I=N[1],D=(0,a.useState)([]),F=(0,r.Z)(D,2),E=F[0],O=F[1],ne=(0,a.useState)([]),ie=(0,r.Z)(ne,2),he=ie[0],pe=ie[1],xe=(0,a.useState)(0),me=(0,r.Z)(xe,2),Ze=me[0],ge=me[1],je=a.useState(0),Pe=(0,r.Z)(je,2),Ne=Pe[0],_e=(Pe[1],(0,ue.Z)({id:"use-autocomplete-demo",options:_,getOptionLabel:function(e){return e.name}})),Ie=_e.getRootProps,De=_e.getInputProps,Fe=_e.getListboxProps,Be=_e.getOptionProps,ze=_e.groupedOptions;(0,a.useEffect)((function(){if(E){for(var e,t=0;t<E.length;t++)e=URL.createObjectURL(E[t]),he.push(e);return function(){URL.revokeObjectURL(e)}}pe([])}),[E]);var Ae=function(e,t){g({id:e,name:t}),u(!0)},Re=function(){return u(!1)},Ee={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},Oe=(0,a.useState)(!1),Te=(0,r.Z)(Oe,2),Ue=Te[0],qe=Te[1],Le=(0,a.useState)("test"),We=(0,r.Z)(Le,2),He=We[0],Me=We[1],Ke=(0,a.useState)(!1),Ge=(0,r.Z)(Ke,2),Ve=Ge[0],Je=Ge[1],Xe=function(e){Me(e),qe(!0)},Ye=function(e,t){"clickaway"!==t&&qe(!1)},Qe=function(e){Me(e),Je(!0)},$e=function(e,t){"clickaway"!==t&&Je(!1)},et=(0,a.useState)(""),tt=(0,r.Z)(et,2),nt=tt[0],rt=tt[1];return(0,a.useEffect)((function(){re().get("https://lego-team5.herokuapp.com/dashboard/category",Ee).then((function(e){y(e.data.body)})).catch((function(e){return console.log(e)}))}),[]),(0,a.useEffect)((function(){re().get("https://lego-team5.herokuapp.com/dashboard/products",Ee).then((function(e){console.log(e),w(e.data.products)})).catch((function(e){return console.log(e)}))}),[]),(0,a.useEffect)((function(){I(k)}),[k]),(0,R.jsxs)("div",{className:"products",children:[(0,R.jsxs)(B.Z,{orientation:"horizontal",value:o,variant:"fullWidth",onChange:function(e,t){s(t)},"aria-label":"Horizontal tabs ",children:[(0,R.jsx)(z.Z,(0,i.Z)({label:"Edit",icon:(0,R.jsx)(L.Z,{color:"primary"})},(0,A.Z)(0))),(0,R.jsx)(z.Z,(0,i.Z)({label:"Add",icon:(0,R.jsx)(W.Z,{color:"success"})},(0,A.Z)(1)))]}),(0,R.jsxs)(h.Z,{component:"div",sx:{paddingTop:"1rem"},children:[(0,R.jsxs)(H.ZP,{axis:"rtl"===e.direction?"x-reverse":"x",index:o,onChangeIndex:function(e){s(e)},children:[(0,R.jsx)(T.Z,{value:o,index:0,children:(0,R.jsxs)(h.Z,{component:"div",children:[(0,R.jsxs)(h.Z,{component:"div",sx:{display:"flex",justifyContent:"center",marginTop:"20px"},children:[(0,R.jsx)("div",(0,i.Z)((0,i.Z)({},Ie()),{},{className:"product-search-wrapper",children:(0,R.jsx)(Ce,(0,i.Z)((0,i.Z)({},De()),{},{onKeyUp:function(e){return function(e){var t=k.filter((function(t){return t.name.includes(e)}));I(t)}(e.target.value)},placeholder:"Search..."}))})),ze.length>0?(0,R.jsx)(ke,(0,i.Z)((0,i.Z)({},Fe()),{},{children:ze.map((function(e,t){return(0,a.createElement)("li",(0,i.Z)((0,i.Z)({},Be({option:e,index:t})),{},{key:e._id}),e.name)}))})):null,(0,R.jsx)(h.Z,{sx:{minWidth:120,height:"50px"},children:(0,R.jsxs)(Q.Z,{fullWidth:!0,children:[(0,R.jsx)(J.Z,{id:"category-simple-select-label",children:"Category"}),(0,R.jsxs)($.Z,{labelId:"category-simple-select-label",id:"category-simple-select",value:nt,label:"Age",onChange:function(e){if(ge(0),""!==e.target.value){rt(e.target.value);var t=b.filter((function(t){return t._id===e.target.value})),n=k.filter((function(e){var n;return(null===(n=e.category)||void 0===n?void 0:n.name)===t[0].name}));I(n)}else I(k),rt("")},sx:{height:"50px",width:"100%",backgroundColor:"#fff"},children:[(0,R.jsx)(X.Z,{value:"",selected:!0,children:"All"}),b.map((function(e){return(0,R.jsx)(X.Z,{value:e._id,children:e.name},e._id)}))]})]})})]}),(0,R.jsxs)(K.ZP,{container:!0,spacing:3,sx:{my:2},children:[_.length>0?_.slice([6*Ze],[6*(Ze+1)]).map((function(e,t){return(0,R.jsx)(fe,{product:e,categories:b,deleteConfirm:Ae,showNotify:Xe,showErr:Qe},e._id)})):(0,R.jsx)(Z.Z,{component:"div",sx:{textAlign:"center",width:"100%",m:2},children:(0,R.jsx)(de.Z,{severity:"warning",children:"There is No products in your database"})}),_.length>0?(0,R.jsx)(be.Z,{sx:{marginInline:"auto",marginBlockStart:"1rem",width:"100%",alignItems:"center",textAlign:"center"},spacing:2,children:(0,R.jsx)(ve.Z,{onChange:function(e,t){ge(t-1)},count:Math.ceil(_.length/6),showFirstButton:!0,showLastButton:!0})}):""]}),(0,R.jsx)(V.Z,{open:d,onClose:Re,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,R.jsxs)(h.Z,{sx:we,children:[(0,R.jsxs)(Z.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:["R u sure u want to delete"," ",(0,R.jsx)("span",{style:{color:"orange"},children:m.name}),"?"]}),(0,R.jsxs)(Z.Z,{id:"modal-modal-description",sx:{mt:2},children:[(0,R.jsx)(G.Z,{variant:"contained",color:"error",onClick:function(){return re().delete("https://lego-team5.herokuapp.com/dashboard/products",{data:{id:m.id},headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){console.log(e);var t=_.findIndex((function(e){return e._id===m.id}));k.splice(t,1),I(k),Xe(e.data.data)})).catch((function(e){Qe(e.response.data.Error)})),void u(!1)},sx:{mr:"1rem"},children:"yes i'm sure"}),(0,R.jsx)(G.Z,{variant:"contained",color:"success",onClick:Re,children:"Cancel"})]})]})})]})}),(0,R.jsx)(T.Z,{value:o,index:1,children:(0,R.jsx)(ee.J9,{initialValues:{name:"",images:[""],price:"",amount:"",sold:0,rating:0,category:""},validationSchema:te.Ry({name:te.Z_().required("product name is Required"),images:te.IX().nullable().required(" you should select at least one image"),price:te.Rx().required("price is required"),amount:te.Rx().required(" amount is Required"),category:te.Rx().required("category is required")}),onSubmit:function(e,t){var n=t.resetForm,r=new(ae());r.append("productName",e.name.toLowerCase()),r.append("price",e.price),r.append("amount",e.amount),r.append("sold",e.sold),r.append("rating",e.rating),r.append("category",e.category),(0,U.Z)(e.images).forEach((function(e){r.append("images",e)}));var o={headers:{"content-type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("token")},onUploadProgress:function(e){var t=Math.round(100*e.loaded/e.total);console.log("progress:"+t+"%")}};re().post("https://lego-team5.herokuapp.com/dashboard/products",r,o).then((function(e){console.log(e),Xe(e.data.message),I([e.data.data].concat((0,U.Z)(_))),n(),pe([])})).catch((function(e){500===e.response.status?Qe("Faild to upload your images's size is too large"):Qe(e.response.data.message),pe([])}))},children:function(e){return(0,R.jsx)(h.Z,{component:"form",id:"addProductForm",onSubmit:e.handleSubmit,sx:{paddingTop:"35px"},children:(0,R.jsxs)(K.ZP,{container:!0,spacing:3,children:[(0,R.jsx)(K.ZP,{item:!0,xs:12,md:6,children:(0,R.jsx)(M.Z,(0,i.Z)({fullWidth:!0,id:"name",name:"name",label:"Product Name",helperText:e.touched.name&&e.errors.name?"".concat(e.errors.name):null,error:!(!e.touched.name||!e.errors.name)},e.getFieldProps("name")))}),(0,R.jsx)(K.ZP,{item:!0,xs:12,md:6,children:(0,R.jsx)(M.Z,(0,i.Z)({fullWidth:!0,name:"price",id:"price",label:"Price",helperText:e.touched.price&&e.errors.price?"".concat(e.errors.price):null,error:!(!e.touched.price||!e.errors.price)},e.getFieldProps("price")))}),(0,R.jsx)(K.ZP,{item:!0,xs:12,md:6,children:(0,R.jsx)(M.Z,(0,i.Z)({fullWidth:!0,name:"amount",id:"amount",label:"Product amount",helperText:e.touched.amount&&e.errors.amount?"".concat(e.errors.amount):null,error:!(!e.touched.amount||!e.errors.amount)},e.getFieldProps("amount")))}),(0,R.jsx)(K.ZP,{item:!0,xs:12,md:6,children:(0,R.jsxs)(Q.Z,{sx:{width:"100%"},error:!(!e.touched.category||!e.errors.category),children:[(0,R.jsx)(J.Z,{id:"category",children:"Category"}),(0,R.jsxs)($.Z,(0,i.Z)((0,i.Z)({fullWidth:!0,labelId:"category",id:"category",label:"Category",name:"category"},e.getFieldProps("category")),{},{children:[(0,R.jsx)(X.Z,{value:"",selected:!0,children:(0,R.jsx)("em",{children:"None"})}),b.map((function(e){return(0,R.jsx)(X.Z,{value:e._id,children:e.name},e._id)}))]})),(0,R.jsx)(Y.Z,{sx:{color:"red"},children:e.touched.category&&e.errors.category?"".concat(e.errors.category):null})]})}),(0,R.jsxs)(K.ZP,{item:!0,xs:12,md:6,children:[(0,R.jsxs)("label",{htmlFor:"images",children:[(0,R.jsx)(Se,{accept:"image/*",id:"images",name:"images",type:"file",multiple:!0,onChange:function(t){e.setFieldValue("images",(0,U.Z)(t.target.files)),t.target.files&&0!==t.target.files.length?(O((0,U.Z)(t.target.files)),console.log(E)):O(void 0)},onBlur:e.handleBlur}),(0,R.jsxs)(j.Z,{color:"primary","aria-label":"upload picture",component:"span",children:[(0,R.jsx)(oe.Z,{}),(0,R.jsx)("p",{style:{margin:"0"},children:"Upload pictures"})]})]}),(0,R.jsx)(Y.Z,{sx:{color:"red"},children:e.touched.images&&e.errors.images?"".concat(e.errors.images):null}),(0,R.jsx)(G.Z,{variant:"contained",type:"submit",color:"success",children:"Add Product"}),(0,R.jsx)(ye.Z,{variant:"determinate",value:Ne})]}),(0,R.jsx)(K.ZP,{item:!0,xs:12,md:6,lg:6,children:E.length>0?(0,R.jsx)(se.Z,{sx:{width:"100%",height:300},cols:3,rowHeight:164,children:he.map((function(e){return(0,R.jsx)(ce.Z,{className:"image-previewer",children:(0,R.jsx)("img",{src:"".concat(e),srcSet:"".concat(e),alt:e,loading:"lazy"})},e)}))}):(0,R.jsx)("p",{children:"selected images will show here"})})]})})}})})]}),(0,R.jsx)(le.Z,{open:Ue,autoHideDuration:3e3,onClose:Ye,severity:"success",children:(0,R.jsx)(de.Z,{onClose:Ye,severity:"success",sx:{width:"100%"},children:He})}),(0,R.jsx)(le.Z,{open:Ve,autoHideDuration:3e3,onClose:$e,severity:"error",children:(0,R.jsx)(de.Z,{onClose:$e,severity:"error",sx:{width:"100%"},children:He})})]})]})},Ne=n(9585),_e=n(93044),Ie=n(82460);var De=function(e){var t=e.user,n=e.openNotification,o=e.updateBlockedUsers,s=e.unBlockUser,c=(0,a.useState)(t.blocked),l=(0,r.Z)(c,2),d=l[0],u=l[1];return(0,R.jsxs)(he.Z,{sx:{maxWidth:345,position:"relative"},children:[d&&(0,R.jsxs)("div",{className:"user-state",children:[(0,R.jsx)("span",{})," Blocked user"]}),(0,R.jsx)(Ne.Z,{sx:{width:"100%",justifyContent:"center"},avatar:(0,R.jsx)(_e.Z,{sx:{bgcolor:Ie.Z[500],width:"150px",height:"150px",fontSize:"4.3rem",justifyContent:"center"},"aria-label":"recipe",children:t.email.split("")[0].toUpperCase()})}),(0,R.jsxs)(xe.Z,{sx:{paddingBottom:0},children:[(0,R.jsx)(Z.Z,{gutterBottom:!0,variant:"h5",align:"center",component:"div",children:t.email}),(0,R.jsxs)(Z.Z,{variant:"h6",align:"center",sx:{color:"grey"},component:"div",children:["From:"," ",(0,R.jsx)("span",{style:{color:Ie.Z[500],textTransform:"uppercase",fontSize:"1.2rem",letterSpacing:"1px"},children:t.country})]})]}),(0,R.jsx)(Ze.Z,{sx:{justifyContent:"center"},children:d?(0,R.jsx)(G.Z,{size:"small",onClick:function(){re().delete("https://lego-team5.herokuapp.com/dashboard/users",{data:{user:t._id},headers:{"content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){1===e.data.body.deletedCount&&re().put("https://lego-team5.herokuapp.com/dashboard/users",{id:t._id,blocked:!1},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){u(!1),n("".concat(t.email," unBlocked")),s((0,i.Z)((0,i.Z)({},t),{},{blocked:!1}))})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))},children:"Unblock"}):(0,R.jsx)(G.Z,{size:"small",onClick:function(){u(!0),re().post("https://lego-team5.herokuapp.com/dashboard/users",{id:t._id},{headers:{"content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){re().put("https://lego-team5.herokuapp.com/dashboard/users",{id:t._id,blocked:!0},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){u(!0),n("".concat(t.email," has been blocked")),o((0,i.Z)((0,i.Z)({},t),{},{blocked:!0}))})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}))},children:"Send to Blacklist"})})]})},Fe=n(78296),Be=n(78243),ze=n(64558);var Ae=function(){var e=(0,q.Z)(),t=(0,a.useState)([]),n=(0,r.Z)(t,2),o=n[0],s=n[1],c=(0,a.useState)([]),l=(0,r.Z)(c,2),d=l[0],u=l[1],p=(0,a.useState)((0,U.Z)(d)),x=(0,r.Z)(p,2),m=x[0],Z=x[1],g=(0,a.useState)((0,U.Z)(o)),j=(0,r.Z)(g,2),f=j[0],v=j[1],b=(0,a.useState)(!1),y=(0,r.Z)(b,2),S=y[0],C=y[1],k=(0,a.useState)("test"),w=(0,r.Z)(k,2),P=w[0],N=w[1],_=(0,a.useState)(0),I=(0,r.Z)(_,2),D=I[0],F=I[1],E=function(e){N(e),C(!0)},O=function(e,t){"clickaway"!==t&&C(!1)},L=(0,a.useState)(0),W=(0,r.Z)(L,2),G=W[0],V=W[1],J=function(e){u([].concat((0,U.Z)(d),[e]));var t=o.filter((function(t){return t._id!==e._id}));s(t)},X=function(e){var t=d.filter((function(t){return t._id!==e._id}));u(t),s([].concat((0,U.Z)(o),[e]))},Y={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};return(0,a.useEffect)((function(){re().get("https://lego-team5.herokuapp.com/dashboard/users",Y).then((function(e){var t=e.data.users.filter((function(e){return!e.blocked}));s(t);var n=e.data.users.filter((function(e){return e.blocked}));u(n)})).catch((function(e){return console.log(e)})),re().get("https://lego-team5.herokuapp.com/dashboard/blacklist",Y).then((function(e){})).catch((function(e){return console.log(e)}))}),[]),(0,a.useEffect)((function(){v(o),Z(d)}),[o,d]),console.log(D),(0,R.jsxs)("div",{className:"users",children:[(0,R.jsxs)(B.Z,{orientation:"horizontal",value:G,variant:"fullWidth",onChange:function(e,t){V(t)},"aria-label":"Horizontal tabs example",children:[(0,R.jsx)(z.Z,(0,i.Z)({label:"Users",icon:(0,R.jsx)(Be.Z,{color:"primary"})},(0,A.Z)(0))),(0,R.jsx)(z.Z,(0,i.Z)({label:"Blocked Users",icon:(0,R.jsx)(ze.Z,{color:"error"})},(0,A.Z)(1)))]}),(0,R.jsx)(h.Z,{component:"div",sx:{my:3},children:(0,R.jsx)(Fe.Z,{freeSolo:!0,id:"usersSearch",disableClearable:!0,onKeyUp:function(e){return function(e){if(1===G){var t=d.filter((function(t){return t.email.includes(e)}));Z(t)}else if(0===G){var n=o.filter((function(t){return t.email.includes(e)}));v(n)}}(e.target.value)},options:o.map((function(e){return e.email})),sx:{backgroundColor:"#fff"},renderInput:function(e){return(0,R.jsx)(M.Z,(0,i.Z)((0,i.Z)({},e),{},{label:"Search input",InputProps:(0,i.Z)((0,i.Z)({},e.InputProps),{},{type:"search"})}))}})}),(0,R.jsxs)(H.ZP,{axis:"rtl"===e.direction?"x-reverse":"x",index:G,onChangeIndex:function(e){V(e)},children:[(0,R.jsx)(T.Z,{value:G,index:0,children:(0,R.jsxs)(K.ZP,{container:!0,spacing:3,children:[f.slice([6*D],[6*(D+1)]).map((function(e){return(0,R.jsx)(K.ZP,{item:!0,md:6,xs:12,lg:4,children:(0,R.jsx)(De,{user:e,openNotification:E,updateBlockedUsers:J,unBlockUser:X})},e.email)})),(0,R.jsx)(be.Z,{sx:{marginInline:"auto",marginBlockStart:"1rem",width:"100%",alignItems:"center",textAlign:"center"},children:(0,R.jsx)(ve.Z,{onChange:function(e,t){F(t-1)},count:Math.ceil(f.length/6),showFirstButton:!0,showLastButton:!0})})]})}),(0,R.jsx)(T.Z,{value:G,index:1,children:(0,R.jsx)(K.ZP,{container:!0,spacing:3,children:m.length?m.map((function(e){return(0,R.jsx)(K.ZP,{item:!0,md:6,xs:12,lg:4,children:(0,R.jsx)(De,{user:e,openNotification:E,unBlockUser:X,updateBlockedUsers:J})},e.email)})):(0,R.jsx)(de.Z,{severity:"warning",sx:{margin:"2rem 1rem",borderRadius:"10px",width:"100%"},children:"There is no blocked users... Block some"})})})]}),(0,R.jsx)(le.Z,{open:S,autoHideDuration:3e3,onClose:O,severity:"success",children:(0,R.jsx)(de.Z,{onClose:O,severity:"success",sx:{width:"100%"},children:P})})]})},Re=n(86823),Ee=n(55818),Oe=n(3721),Te=n(81131);var Ue=function(e){var t=e.shipper,n=e.openNotification,r=e.removeShipper;return(0,R.jsxs)(he.Z,{sx:{maxWidth:345,position:"relative"},children:[(0,R.jsx)(Ne.Z,{sx:{width:"100%",justifyContent:"center"},avatar:(0,R.jsx)(_e.Z,{sx:{bgcolor:Ie.Z[500],width:"150px",height:"150px",fontSize:"4.3rem",justifyContent:"center"},"aria-label":"recipe",children:t.email.split("")[0].toUpperCase()})}),(0,R.jsxs)(xe.Z,{sx:{paddingBottom:0},children:[(0,R.jsx)(Z.Z,{gutterBottom:!0,variant:"h5",align:"center",component:"div",children:t.email}),(0,R.jsx)(Z.Z,{gutterBottom:!0,variant:"h5",align:"center",component:"div",children:t.name.toUpperCase()}),(0,R.jsxs)(Z.Z,{align:"center",children:["Phone Number: +02 ",t.phone_number]})]}),(0,R.jsx)(Ze.Z,{sx:{justifyContent:"center"},children:(0,R.jsx)(G.Z,{size:"small",onClick:function(){re().delete("https://lego-team5.herokuapp.com/dashboard/shippers",{data:{id:t._id},headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){1===e.data.body.deletedCount&&(r(t._id),n(e.data.data))})).catch((function(e){return console.log(e)}))},children:"Delete Shipper"})})]})};var qe=function(){var e=(0,a.useState)([]),t=(0,r.Z)(e,2),n=t[0],o=t[1],s=(0,a.useState)((0,U.Z)(n)),c=(0,r.Z)(s,2),l=c[0],d=c[1],u=(0,a.useState)(!1),p=(0,r.Z)(u,2),x=p[0],m=p[1],g=(0,a.useState)("test"),j=(0,r.Z)(g,2),f=j[0],v=j[1],b=(0,a.useState)(!1),y=(0,r.Z)(b,2),S=y[0],C=y[1],k=(0,a.useState)(""),w=(0,r.Z)(k,2),P=w[0],N=w[1],_=function(e){v(e),m(!0)},I=function(e,t){"clickaway"!==t&&m(!1)},D=function(e,t){"clickaway"!==t&&C(!1)},F=function(e){var t=l.filter((function(t){return t._id!==e}));o(t)},B={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};(0,a.useEffect)((function(){re().get("https://lego-team5.herokuapp.com/dashboard/shippers",B).then((function(e){console.log(e.data.shippers),o(e.data.shippers)})).catch((function(e){return console.log(e)}))}),[]),(0,a.useEffect)((function(){d(n)}),[n]);var z=(0,ee.TA)({initialValues:{name:"",email:"",phone_number:""},validationSchema:te.Ry({name:te.Z_().required("shipper name is required"),email:te.Z_().email("Invalid email address").required("email address is required"),phone_number:te.Z_().max(11,"Must be 11 characters").required("phone number is required")}),onSubmit:function(e,t){var r=t.resetForm,i={shipperName:e.name.toLowerCase(),shipperEmail:e.email,phoneNumber:e.phone_number},a={headers:{"content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};re().post("https://lego-team5.herokuapp.com/dashboard/shippers",i,a).then((function(t){console.log(t),_(t.data.message),o([].concat((0,U.Z)(n),[e])),r()})).catch((function(e){var t;t=e.response.data.message,N(t),C(!0)}))}});return(0,R.jsxs)("div",{className:"shippers",children:[(0,R.jsx)(h.Z,{component:"div",sx:{my:3},children:(0,R.jsxs)(Re.Z,{children:[(0,R.jsx)(Ee.Z,{expandIcon:(0,R.jsx)(Te.Z,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,R.jsx)(Z.Z,{children:"Register Shipper"})}),(0,R.jsx)(Oe.Z,{children:(0,R.jsxs)(h.Z,{component:"form",onSubmit:z.handleSubmit,className:"add-shipper-form",children:[(0,R.jsx)(M.Z,(0,i.Z)({id:"shippername",label:"Shipper Name",variant:"outlined",helperText:z.touched.name&&z.errors.name?z.errors.name:null,error:!(!z.touched.name||!z.errors.name)},z.getFieldProps("name"))),(0,R.jsx)(M.Z,(0,i.Z)({id:"shipperEmail",label:"Shipper Email",variant:"outlined",helperText:z.touched.email&&z.errors.email?z.errors.email:null,error:!(!z.touched.email||!z.errors.email)},z.getFieldProps("email"))),(0,R.jsx)(M.Z,(0,i.Z)({id:"shipperPhoneNumber",label:"Shipper Phone Number",variant:"outlined",helperText:z.touched.phone_number&&z.errors.phone_number?z.errors.phone_number:null,error:!(!z.touched.phone_number||!z.errors.phone_number)},z.getFieldProps("phone_number"))),(0,R.jsx)(G.Z,{type:"submit",variant:"contained",children:"Register Shipper"})]})})]})}),(0,R.jsx)(h.Z,{component:"div",sx:{my:3},children:(0,R.jsx)(Fe.Z,{freeSolo:!0,id:"shippersSearch",onKeyUp:function(e){return function(e){var t=n.filter((function(t){return t.email.includes(e)}));d(t)}(e.target.value)},disableClearable:!0,options:n.map((function(e){return e.email})),sx:{backgroundColor:"#fff"},renderInput:function(e){return(0,R.jsx)(M.Z,(0,i.Z)((0,i.Z)({},e),{},{label:"Search input",InputProps:(0,i.Z)((0,i.Z)({},e.InputProps),{},{type:"search"})}))}})}),(0,R.jsx)(K.ZP,{container:!0,spacing:3,children:l.map((function(e){return(0,R.jsx)(K.ZP,{item:!0,md:6,xs:12,lg:4,children:(0,R.jsx)(Ue,{shipper:e,removeShipper:F,openNotification:_})},e.email)}))}),(0,R.jsx)(le.Z,{open:x,autoHideDuration:3e3,onClose:I,severity:"success",children:(0,R.jsx)(de.Z,{onClose:I,severity:"success",sx:{width:"100%"},children:f})}),(0,R.jsx)(le.Z,{open:S,autoHideDuration:3e3,onClose:D,severity:"error",children:(0,R.jsx)(de.Z,{onClose:D,severity:"error",sx:{width:"100%"},children:P})})]})},Le=n(79836),We=n(53382),He=n(53994),Me=n(39281),Ke=n(56890),Ge=n(35855),Ve=n(10703),Je=n(4919),Xe=n(27247),Ye={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:500,bgcolor:"background.paper",bcategory:"2px solid #000",boxShadow:24,p:4};var Qe=function(e){var t=e.category,n=e.confirmDelete,o=e.openErrorMsg,s=e.index,c=(0,a.useState)(!1),l=(0,r.Z)(c,2),d=l[0],u=l[1],p=(0,a.useState)(t),x=(0,r.Z)(p,2),m=x[0],g=x[1],f=(0,a.useState)(!1),v=(0,r.Z)(f,2),b=v[0],y=v[1],S=(0,a.useState)(!1),C=(0,r.Z)(S,2),k=C[0],w=C[1],P=function(){return w(!1)},N={headers:{"content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(Ge.Z,{sx:{"&:last-child td, &:last-child th":{bcategory:0}},children:[(0,R.jsx)(He.Z,{children:s+1}),(0,R.jsx)(He.Z,{children:d?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(me.Z,{value:m.name,onChange:function(e){g((0,i.Z)((0,i.Z)({},m),{},{name:e.target.value}))},error:b,"aria-describedby":"component-helper-text"}),(0,R.jsx)(Y.Z,{id:"component-helper-text",sx:{color:"red"},children:b?"you can't set empty category":""})]}):m.name}),(0,R.jsx)(He.Z,{sx:{px:0},children:(0,R.jsxs)(h.Z,{sx:{display:"flex",padding:"16px"},children:[d?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(j.Z,{"aria-label":"submit edit",onClick:function(){m.name.length>0?(y(!1),re().put("https://lego-team5.herokuapp.com/dashboard/category",{id:m._id,name:m.name},N).then((function(e){u(!1)})).catch((function(e){o("you can't set two categories with same name")}))):y(!0)},children:(0,R.jsx)(ge.Z,{color:"success"})}),(0,R.jsx)(j.Z,{"aria-label":"cancel edit",onClick:function(){g((0,i.Z)((0,i.Z)({},m),{},{name:t.name})),y(!1),u(!1)},children:(0,R.jsx)(je.Z,{color:"primary"})})]}):(0,R.jsx)(j.Z,{"aria-label":"edit",onClick:function(){u(!0)},children:(0,R.jsx)(Je.Z,{color:"success"})}),(0,R.jsx)(j.Z,{"aria-label":"delete",onClick:function(e){w(!0)},children:(0,R.jsx)(Xe.Z,{sx:{color:Ie.Z[600]}})})]})})]}),(0,R.jsx)(V.Z,{open:k,onClose:P,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,R.jsxs)(h.Z,{sx:Ye,children:[(0,R.jsxs)(Z.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:["R u sure u want to delete"," ",(0,R.jsx)("span",{style:{color:"orange"},children:t.name}),"?"]}),(0,R.jsxs)(Z.Z,{id:"modal-modal-description",sx:{mt:2,textAlign:"center"},children:[(0,R.jsx)(G.Z,{variant:"contained",color:"error",onClick:function(){n(m._id,P)},sx:{mr:"1rem"},children:"yes i'm sure"}),(0,R.jsx)(G.Z,{variant:"contained",color:"success",onClick:P,children:"Cancel"})]})]})})]})};var $e=function(){var e=(0,q.Z)(),t=(0,a.useState)([]),n=(0,r.Z)(t,2),o=n[0],s=n[1],c=(0,a.useState)((0,U.Z)(o)),l=(0,r.Z)(c,2),d=l[0],u=l[1],p=(0,a.useState)(0),x=(0,r.Z)(p,2),m=x[0],Z=x[1],g=(0,a.useState)("test"),j=(0,r.Z)(g,2),f=j[0],v=j[1],b=(0,a.useState)(!1),y=(0,r.Z)(b,2),S=y[0],C=y[1],k=function(e){v(e),C(!0)},w=function(e,t){"clickaway"!==t&&C(!1)},P=(0,a.useState)(!1),N=(0,r.Z)(P,2),_=N[0],I=N[1],D=function(e){v(e),I(!0)},F=function(e,t){"clickaway"!==t&&I(!1)},E={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},O=function(e,t){re().delete("https://lego-team5.herokuapp.com/dashboard/category",{data:{id:e},headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(n){var r=d.findIndex((function(t){return t._id===e}));o.splice(r,1),u(o),t(),D(n.data.data+" Successfully!")})).catch((function(e){console.log(e)}))};return(0,a.useEffect)((function(){re().get("https://lego-team5.herokuapp.com/dashboard/category",E).then((function(e){s(e.data.body)}))}),[]),(0,a.useEffect)((function(){u(o)}),[o]),(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(B.Z,{orientation:"horizontal",value:m,variant:"fullWidth",onChange:function(e,t){Z(t)},"aria-label":"Horizontal tabs example",sx:{borderRight:1,borderColor:"divider"},children:[(0,R.jsx)(z.Z,(0,i.Z)({label:"Edit",icon:(0,R.jsx)(L.Z,{color:"primary"})},(0,A.Z)(0))),(0,R.jsx)(z.Z,(0,i.Z)({label:"Add",icon:(0,R.jsx)(W.Z,{color:"success"})},(0,A.Z)(1)))]}),(0,R.jsxs)(h.Z,{component:"div",sx:{paddingTop:"1rem"},children:[(0,R.jsxs)(H.ZP,{axis:"rtl"===e.direction?"x-reverse":"x",index:m,onChangeIndex:function(e){Z(e)},children:[(0,R.jsxs)(T.Z,{value:m,index:0,dir:e.direction,children:[(0,R.jsx)(h.Z,{component:"div",sx:{my:3},children:(0,R.jsx)(Fe.Z,{freeSolo:!0,id:"categorySearch",onKeyUp:function(e){return function(e){var t=o.filter((function(t){return t.name.includes(e)}));u(t)}(e.target.value)},disableClearable:!0,options:d.map((function(e){return e.name})),sx:{backgroundColor:"#fff"},renderInput:function(e){return(0,R.jsx)(M.Z,(0,i.Z)((0,i.Z)({},e),{},{label:"Search input",InputProps:(0,i.Z)((0,i.Z)({},e.InputProps),{},{type:"search"})}))}})}),(0,R.jsx)(Me.Z,{component:Ve.Z,children:(0,R.jsxs)(Le.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,R.jsx)(Ke.Z,{children:(0,R.jsxs)(Ge.Z,{children:[(0,R.jsx)(He.Z,{children:"Index"}),(0,R.jsx)(He.Z,{children:"Name"}),(0,R.jsx)(He.Z,{children:"Controls"})]})}),(0,R.jsx)(We.Z,{children:d.map((function(e,t){return(0,R.jsx)(Qe,{category:e,index:t,confirmDelete:O,openErrorMsg:k},e._id)}))})]})})]}),(0,R.jsx)(T.Z,{value:m,index:1,dir:e.direction,children:(0,R.jsx)(ee.J9,{initialValues:{categoryName:""},validationSchema:te.Ry({categoryName:te.Z_().required("product category name is Required")}),onSubmit:function(e){(new(ae())).append("categoryName",e.categoryName.toLowerCase());var t={headers:{"content-type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")}};re().post("https://lego-team5.herokuapp.com/dashboard/category",e,t).then((function(t){s([].concat((0,U.Z)(o),[t.data.data])),e.categoryName="",D(t.data.message)})).catch((function(e){k(e.response.data.message)}))},children:function(e){return(0,R.jsxs)(h.Z,{component:"form",id:"addCategoryForm",onSubmit:e.handleSubmit,sx:{paddingTop:"35px"},children:[(0,R.jsx)(K.ZP,{container:!0,spacing:3,children:(0,R.jsx)(K.ZP,{item:!0,xs:12,md:6,children:(0,R.jsx)(M.Z,(0,i.Z)({fullWidth:!0,id:"categoryName",name:"categoryName",label:"Category Name",helperText:e.touched.categoryName&&e.errors.categoryName?"".concat(e.errors.categoryName):null,error:!(!e.touched.categoryName||!e.errors.categoryName)},e.getFieldProps("categoryName")))})}),(0,R.jsx)(G.Z,{variant:"contained",sx:{my:2},type:"submit",color:"success",children:"Add Category"})]})}})})]}),(0,R.jsx)(le.Z,{open:S,autoHideDuration:3e3,onClose:w,severity:"error",children:(0,R.jsx)(de.Z,{onClose:w,severity:"error",sx:{width:"100%"},children:f})}),(0,R.jsx)(le.Z,{open:_,autoHideDuration:3e3,onClose:F,severity:"success",children:(0,R.jsx)(de.Z,{onClose:F,severity:"success",sx:{width:"100%"},children:f})})]})]})},et=n(37541),tt=n(43504),nt=n(67492),rt=n(80720),ot=n(95573),it=[{id:"order_date",numeric:!1,disablePadding:!1,label:"Date"},{id:"email",numeric:!1,disablePadding:!1,label:"Email"},{id:"totalPrice",numeric:!1,disablePadding:!1,label:"Total Price"},{id:"orderStatus",numeric:!0,disablePadding:!1,label:"Order Status"},{id:"shippers",numeric:!0,disablePadding:!1,label:"Shippers"},{id:"Controls",numeric:!0,disablePadding:!1,label:"Controls"}];var at=function(e){var t=e.order,n=e.orderBy,r=e.onRequestSort;return(0,R.jsx)(Ke.Z,{children:(0,R.jsx)(Ge.Z,{children:it.map((function(e){return(0,R.jsx)(He.Z,{align:e.numeric?"center":"left",padding:e.disablePadding?"none":"normal",sortDirection:n===e.id&&t,children:"order_date"===e.id?(0,R.jsxs)(rt.Z,{active:n===e.id,direction:n===e.id?t:"asc",onClick:(o=e.id,function(e){r(e,o)}),children:[e.label,n===e.id?(0,R.jsx)(h.Z,{component:"span",sx:ot.Z,children:"desc"===t?"sorted descending":"sorted ascending"}):null]}):(0,R.jsxs)(R.Fragment,{children:[e.label,n===e.id?(0,R.jsx)(h.Z,{component:"span",sx:ot.Z,children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var o}))})})},st=n(12065),ct=n(66809),lt=n(91903),dt=n(86753);var ut=function(e){var t=e.numSelected,n=e.openFilterData,r=e.restoreAllOrders,o=e.orders,a=e.propsOrders;return(0,R.jsxs)(x.Z,{sx:(0,i.Z)({pl:{sm:2},pr:{xs:1,sm:1}},t>0&&{bgcolor:function(e){return(0,st.Fq)(e.palette.primary.main,e.palette.action.activatedOpacity)}}),children:[t>0?(0,R.jsxs)(Z.Z,{sx:{flex:"1 1 100%"},color:"inherit",variant:"subtitle1",component:"div",children:[t," selected"]}):(0,R.jsx)(Z.Z,{sx:{flex:"1 1 100%"},variant:"h6",id:"tableTitle",component:"div",children:"Recent Orders"}),o.length!==a.length?(0,R.jsx)(ct.Z,{title:"Reset Orders",children:(0,R.jsx)(j.Z,{onClick:r,children:(0,R.jsx)(dt.Z,{})})}):(0,R.jsx)(ct.Z,{title:"Filter By Range Date",children:(0,R.jsx)(j.Z,{onClick:n,children:(0,R.jsx)(lt.Z,{})})})]})};function ht(e){var t,n,o=e.order,s=e.shippers,c=(0,a.useState)(""),l=(0,r.Z)(c,2),d=l[0],u=l[1],h=(0,a.useState)(!1),p=(0,r.Z)(h,2),x=p[0],m=p[1],Z=(0,a.useState)({isCanceled:o.isCanceled,isDelivered:o.isDelivered,isPending:o.isPending,isShipped:o.isShipped}),g=(0,r.Z)(Z,1)[0],j={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};return(0,R.jsxs)(Ge.Z,{children:[(0,R.jsx)(He.Z,{children:o.order_date}),(0,R.jsx)(He.Z,{children:o.user.email}),(0,R.jsxs)(He.Z,{children:[o.total_price?Number(o.total_price).toFixed(2):""," EGP"]}),(0,R.jsxs)(He.Z,{align:"center",children:[(0,R.jsx)("span",{className:"order-status-code",style:{backgroundColor:g.isCanceled?"red":g.isDelivered?"green":g.isShipped?"orange":(g.isPending,"grey")}})," ",g.isCanceled?"Canceled":g.isDelivered?"Delivered":g.isShipped?"Shipped":g.isPending||0!==d.length?"Pending":"Not assigned"]}),(0,R.jsx)(He.Z,{align:"center",sx:{minWidth:"150px"},children:x?(0,R.jsxs)(Q.Z,{sx:{width:"100%",mt:2},children:[(0,R.jsx)(J.Z,{id:"updateCategory",children:"Category"}),(0,R.jsxs)($.Z,{fullWidth:!0,labelId:"updateCategory",id:"updateCategory",label:"Category",name:"updateCategory",value:d,onChange:function(e){return u(e.target.value)},children:[(0,R.jsx)(X.Z,{value:"",selected:!0,children:(0,R.jsx)("em",{children:"None"})}),s.map((function(e,t){return(0,R.jsx)(X.Z,{value:e._id,children:e.name},t)}))]}),(0,R.jsx)(Y.Z,{sx:{color:"red"}})]}):o.shipper?null===(t=s.find((function(e){return e._id===o.shipper})))||void 0===t?void 0:t.name:d?null===(n=s.find((function(e){return e._id===d})))||void 0===n?void 0:n.name:"None"}),(0,R.jsxs)(He.Z,{align:"center",children:[x&&(0,R.jsx)(G.Z,{variant:"outlined",startIcon:(0,R.jsx)(ge.Z,{color:"success"}),onClick:function(){re().put("https://lego-team5.herokuapp.com/dashboard/orders",(0,i.Z)((0,i.Z)({id:o._id},g),{},{shipper:d}),j).then((function(e){m(!1)})).catch((function(e){return console.log(e)}))},sx:{marginRight:"5px"},children:"Assign"}),(0,R.jsx)(G.Z,{variant:"outlined",startIcon:(0,R.jsx)(Je.Z,{color:"primary"}),onClick:function(){return m(!x)},children:x?"Cancel":"Change"})]})]})}var pt=n(5574),xt=n(97123),mt=n(39157),Zt=n(51691),gt=n(65661),jt=n(77751),ft=n(71652),vt=n(50720);function bt(e){var t=e.changeDate,n=a.useState(new Date),o=(0,r.Z)(n,2),s=o[0],c=o[1],l=a.useState(new Date),d=(0,r.Z)(l,2),u=d[0],p=d[1];return(0,R.jsx)(ft._,{dateAdapter:jt.Z,children:(0,R.jsxs)(h.Z,{component:"div",style:{display:"flex",justifyContent:"space-around",alignItems:"center",margin:"1rem 0"},children:[(0,R.jsx)(vt.M,{disableFuture:!0,label:"Start Date",value:s,minDate:new Date("2022-01-01"),onChange:function(e){c(e),t({start:e,end:u})},renderInput:function(e){return(0,R.jsx)(M.Z,(0,i.Z)({},e))}}),(0,R.jsx)("div",{style:{padding:"0 10px"},children:"to"}),(0,R.jsx)(vt.M,{disableFuture:!0,label:"End Date",value:u,minDate:new Date("2022-01-01"),onChange:function(e){p(e),t({start:s,end:e})},renderInput:function(e){return(0,R.jsx)(M.Z,(0,i.Z)({},e))}})]})})}var yt=function(e){var t=e.choosenOrders,n=e.open,o=e.handleClose,i=e.openNotification,s=a.useState(new Date),c=(0,r.Z)(s,2),l=c[0],d=c[1],u=a.useState(new Date),h=(0,r.Z)(u,2),p=h[0],x=h[1];return(0,R.jsx)("div",{children:(0,R.jsxs)(pt.Z,{open:n,onClose:o,children:[(0,R.jsx)(gt.Z,{children:"Find Orders in a specifec date"}),(0,R.jsxs)(mt.Z,{children:[(0,R.jsx)(Zt.Z,{children:"To find orders range set start date and end date"}),(0,R.jsx)(bt,{changeDate:function(e){d(e.start),x(e.end)}})]}),(0,R.jsxs)(xt.Z,{children:[(0,R.jsx)(G.Z,{onClick:o,children:"Cancel"}),(0,R.jsx)(G.Z,{onClick:function(){console.log("start",l.toLocaleDateString()),console.log("end",p.toLocaleDateString()),re().post("".concat("https://lego-team5.herokuapp.com","/dashboard/order"),{date:{start:l.toLocaleDateString(),end:p.toLocaleDateString()}},{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){t(e.data.orders),i(e.data.message),o()})).catch((function(e){return console.log(e)}))},children:"Find"})]})]})})};function St(e,t,n){return new Date(t[n])<new Date(e[n])?-1:new Date(t[n])>new Date(e[n])?1:0}function Ct(e){return"desc"===e?function(e,t){return St(e,t,"order_date")}:function(e,t){return-St(e,t,"order_date")}}function kt(e,t){var n=e.map((function(e,t){return[e,t]}));return n.sort((function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]})),n.map((function(e){return e[0]}))}var wt=function(e){var t=e.orders,n=e.shippers,o=a.useState("asc"),i=(0,r.Z)(o,2),s=i[0],c=i[1],l=a.useState("order_date"),d=(0,r.Z)(l,2),u=d[0],p=d[1],x=a.useState([]),m=(0,r.Z)(x,1)[0],Z=a.useState(0),g=(0,r.Z)(Z,2),j=g[0],f=g[1],v=a.useState(5),b=(0,r.Z)(v,2),y=b[0],S=b[1],C=a.useState((0,U.Z)(t)),k=(0,r.Z)(C,2),w=k[0],P=k[1],N=a.useState(!1),_=(0,r.Z)(N,2),I=_[0],D=_[1],F=a.useState(!1),B=(0,r.Z)(F,2),z=B[0],A=B[1],E=a.useState("test"),O=(0,r.Z)(E,2),T=O[0],q=O[1],L=function(e,t){"clickaway"!==t&&A(!1)},W=j>0?Math.max(0,(1+j)*y-w.length):0;return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(h.Z,{sx:{width:"100%"},children:(0,R.jsxs)(Ve.Z,{sx:{width:"100%",mb:2},children:[(0,R.jsx)(ut,{numSelected:m.length,openFilterData:function(){D(!0)},restoreAllOrders:function(){P(t)},orders:t,propsOrders:w}),(0,R.jsx)(Me.Z,{children:(0,R.jsxs)(Le.Z,{sx:{minWidth:750},"aria-labelledby":"tableTitle",size:"medium",children:[(0,R.jsx)(at,{numSelected:m.length,order:s,orderBy:u,onRequestSort:function(e,t){c(u===t&&"asc"===s?"desc":"asc"),p(t)},rowCount:w.length}),(0,R.jsxs)(We.Z,{children:[kt(w,Ct(s)).slice(j*y,j*y+y).map((function(e,t){return(0,R.jsx)(ht,{order:e,shippers:n},t)})),W>0&&(0,R.jsx)(Ge.Z,{style:{height:53*W},children:(0,R.jsx)(He.Z,{colSpan:6})})]})]})}),(0,R.jsx)(nt.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:w.length,rowsPerPage:y,page:j,onPageChange:function(e,t){f(t)},onRowsPerPageChange:function(e){S(parseInt(e.target.value,10)),f(0)},sx:{mb:0}})]})}),(0,R.jsx)(yt,{open:I,choosenOrders:function(e){P(e),console.log(e)},handleClose:function(){D(!1)},openNotification:function(e){q(e),A(!0)}}),(0,R.jsx)(le.Z,{open:z,autoHideDuration:3e3,onClose:L,severity:"success",children:(0,R.jsx)(de.Z,{onClose:L,severity:"success",sx:{width:"100%"},children:T})})]})},Pt=n(19913),Nt=n(97987),_t=n(90466),It=n(12891),Dt=n(17684),Ft=n(53628);var Bt=function(e){return(0,R.jsx)(Z.Z,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0,children:e.children})};function zt(e,t){return{time:e,amount:t}}zt("00:00",0),zt("03:00",300),zt("06:00",600),zt("09:00",800),zt("12:00",1500),zt("15:00",2e3),zt("18:00",2400),zt("21:00",2400),zt("24:00",void 0);function At(e){var t=e.orders,n=(0,q.Z)(),r=t.map((function(e){var t=e.order_date.split("/");return{date:[t[1],t[0]].join("/"),sales:e.total_price}}));return(0,R.jsxs)(a.Fragment,{children:[(0,R.jsx)(Bt,{children:"Today"}),(0,R.jsx)(Pt.h,{children:(0,R.jsxs)(Nt.w,{data:r,margin:{top:16,right:16,bottom:0,left:24},children:[(0,R.jsx)(_t.K,{dataKey:"date",stroke:n.palette.text.secondary,style:n.typography.body2}),(0,R.jsx)(It.B,{stroke:n.palette.text.secondary,style:n.typography.body2,children:(0,R.jsx)(Dt._,{angle:270,position:"left",style:(0,i.Z)({textAnchor:"middle",fill:n.palette.text.primary},n.typography.body1),children:"Sales (EGP)"})}),(0,R.jsx)(Ft.x,{isAnimationActive:!1,type:"monotone",dataKey:"sales",stroke:n.palette.primary.main,dot:!1})]})})]})}function Rt(e){var t=e.recentDeposites;return(0,R.jsxs)(a.Fragment,{children:[(0,R.jsx)(Bt,{children:"Total Income"}),(0,R.jsxs)(Z.Z,{color:"text.secondary",children:["In ",(new Date).toLocaleString("en-US",{month:"long"})]}),(0,R.jsxs)(Z.Z,{component:"p",variant:"h4",children:[null===t||void 0===t?void 0:t.toFixed(2)," EGP"]})]})}function Et(e){var t=e.propOrders,n=e.propShippers,o=(0,a.useState)([]),i=(0,r.Z)(o,2),s=i[0],c=i[1],l=(0,a.useState)([]),d=(0,r.Z)(l,2),u=d[0],h=d[1];return(0,a.useEffect)((function(){c(t),h(n)}),[t,n]),(0,R.jsxs)(a.Fragment,{children:[(0,R.jsx)(Bt,{children:"Recent Orders"}),(0,R.jsxs)(Le.Z,{size:"small",children:[(0,R.jsx)(Ke.Z,{children:(0,R.jsxs)(Ge.Z,{children:[(0,R.jsx)(He.Z,{children:"Date"}),(0,R.jsx)(He.Z,{children:"Email"}),(0,R.jsx)(He.Z,{children:"Total price"}),(0,R.jsx)(He.Z,{align:"center",children:"Order Status"}),(0,R.jsx)(He.Z,{align:"center",children:"Shippers"}),(0,R.jsx)(He.Z,{align:"center",children:"Controls"})]})}),(0,R.jsx)(We.Z,{children:null===s||void 0===s?void 0:s.map((function(e,t){return(0,R.jsx)(ht,{order:e,shippers:u},t)}))})]})]})}var Ot=n(23060);function Tt(e){return(0,R.jsxs)(Z.Z,(0,i.Z)((0,i.Z)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ",(0,R.jsx)(Ot.Z,{color:"inherit",href:"https://mui.com/",children:"Lego clone"})," ",(new Date).getFullYear(),"."]}))}var Ut=function(e){var t,n=e.recentOrder,o=e.shippers,i=(0,a.useState)([]),s=(0,r.Z)(i,2),c=s[0],l=s[1],d=null===c||void 0===c?void 0:c.map((function(e){return e.total_price.split(" ")[0]}));d.length>0&&(t=null===d||void 0===d?void 0:d.reduce((function(e,t){return Number(t)+Number(e)})));var u={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};return(0,a.useEffect)((function(){var e=(new Date).toLocaleDateString().split("/"),t=[e[0],"1",e[2]].join("/");re().post("https://lego-team5.herokuapp.com/dashboard/order",{date:{start:t,end:(new Date).toLocaleDateString()}},u).then((function(e){l(e.data.orders)})).catch((function(e){return console.log(e)}))}),[]),(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(K.ZP,{container:!0,spacing:3,children:[(0,R.jsx)(K.ZP,{item:!0,xs:12,md:8,lg:9,children:(0,R.jsx)(Ve.Z,{sx:{p:2,display:"flex",flexDirection:"column",height:240},children:(0,R.jsx)(At,{orders:c})})}),(0,R.jsx)(K.ZP,{item:!0,xs:12,md:4,lg:3,children:(0,R.jsx)(Ve.Z,{sx:{p:2,display:"flex",flexDirection:"column",height:240},children:(0,R.jsx)(Rt,{recentDeposites:t})})}),(0,R.jsx)(K.ZP,{item:!0,xs:12,children:(0,R.jsx)(Ve.Z,{sx:{p:2,display:"flex",flexDirection:"column"},children:(0,R.jsx)(Et,{propOrders:n,propShippers:o})})})]}),(0,R.jsx)(Tt,{sx:{pt:4}})]})},qt=(0,s.ZP)(p.Z,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return(0,i.Z)({zIndex:t.zIndex.drawer+1,transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},n&&{marginLeft:200,width:"calc(100% - ".concat(200,"px)"),transition:t.transitions.create(["width","margin"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen})})})),Lt=(0,s.ZP)(u.ZP,{shouldForwardProp:function(e){return"open"!==e}})((function(e){var t=e.theme,n=e.open;return{"& .MuiDrawer-paper":(0,i.Z)({position:"relative",whiteSpace:"nowrap",width:200,transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.enteringScreen}),boxSizing:"border-box"},!n&&(0,o.Z)({overflowX:"hidden",transition:t.transitions.create("width",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),width:t.spacing(7)},t.breakpoints.up("sm"),{width:t.spacing(9)}))}})),Wt=(0,c.Z)();function Ht(){var e=a.useState(!1),t=(0,r.Z)(e,2),n=t[0],o=t[1],s=a.useState(0),c=(0,r.Z)(s,2),u=c[0],p=c[1],y=a.useState([]),S=(0,r.Z)(y,2),C=S[0],k=S[1],w=a.useState([]),P=(0,r.Z)(w,2),N=P[0],_=P[1],I=a.useState([]),D=(0,r.Z)(I,2),F=D[0],B=D[1],z={headers:{Authorization:"Bearer "+localStorage.getItem("token")}};a.useEffect((function(){re().get("https://lego-team5.herokuapp.com/dashboard/orders",z).then((function(e){k(e.data.orders)})).catch((function(e){return console.log(e)})),re().get("https://lego-team5.herokuapp.com/dashboard/recentOrders",z).then((function(e){B(e.data.orders)})).catch((function(e){return console.log(e)})),re().get("https://lego-team5.herokuapp.com/dashboard/shippers",z).then((function(e){_(e.data.shippers)})).catch((function(e){return console.log(e)}))}),[]);var A=function(){o(!n)};return(0,R.jsx)(l.Z,{theme:Wt,children:(0,R.jsxs)(h.Z,{sx:{display:"flex"},children:[(0,R.jsx)(d.ZP,{}),(0,R.jsx)(qt,{position:"absolute",open:n,children:(0,R.jsxs)(x.Z,{sx:{pr:"24px",backgroundColor:"#ffcf00"},children:[(0,R.jsx)(j.Z,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:A,sx:(0,i.Z)({marginRight:"36px",color:"black"},n&&{display:"none"}),children:(0,R.jsx)(v.Z,{})}),(0,R.jsxs)(Z.Z,{component:"h1",variant:"h6",color:"black",noWrap:!0,sx:{flexGrow:1},children:[(0,R.jsx)("img",{src:O.Z,style:{width:"35px",display:"inline-block",marginRight:"10px"},alt:""}),"Dashboard"]}),(0,R.jsx)(tt.OL,{to:"/",children:(0,R.jsx)(j.Z,{color:"inherit",sx:{color:"black"},children:(0,R.jsx)(et.Z,{})})})]})}),(0,R.jsxs)(Lt,{variant:"permanent",open:n,children:[(0,R.jsx)(x.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",px:[1]},children:(0,R.jsx)(j.Z,{onClick:A,children:(0,R.jsx)(b.Z,{})})}),(0,R.jsx)(g.Z,{}),(0,R.jsx)(m.Z,{component:"nav",children:(0,R.jsx)(E,{value:u,handler:function(e,t){p(t)},open:n})})]}),(0,R.jsx)(h.Z,{component:"main",sx:{backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900]},flexGrow:1,height:"100vh",overflow:"auto",marginTop:"4rem"},children:(0,R.jsxs)(f.Z,{maxWidth:"lg",sx:{mt:4,mb:4},children:[(0,R.jsx)(T.Z,{value:u,index:0,children:(0,R.jsx)(Ut,{recentOrder:F,shippers:N,orders:C})}),(0,R.jsx)(T.Z,{value:u,index:1,children:(0,R.jsx)(wt,{orders:C,shippers:N})}),(0,R.jsx)(T.Z,{value:u,index:2,children:(0,R.jsx)(Pe,{})}),(0,R.jsx)(T.Z,{value:u,index:3,children:(0,R.jsx)(Ae,{})}),(0,R.jsx)(T.Z,{value:u,index:4,children:(0,R.jsx)(qe,{})}),(0,R.jsx)(T.Z,{value:u,index:5,children:(0,R.jsx)($e,{})})]})})]})})}function Mt(){return(0,R.jsx)(Ht,{})}},43722:function(e,t,n){var r=n(1413),o=n(45987),i=(n(72791),n(64554)),a=n(80184),s=["children","value","index"];t.Z=function(e){var t=e.children,n=e.value,c=e.index,l=(0,o.Z)(e,s);return(0,a.jsx)("div",(0,r.Z)((0,r.Z)({role:"tabpanel",hidden:n!==c,id:"vertical-tabpanel-".concat(c),"aria-labelledby":"vertical-tab-".concat(c)},l),{},{children:n===c&&(0,a.jsx)(i.Z,{sx:{p:3},children:t})}))}},39938:function(e,t,n){function r(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}}n.d(t,{Z:function(){return r}})}}]);
//# sourceMappingURL=432.59fcd7cf.chunk.js.map