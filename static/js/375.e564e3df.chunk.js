"use strict";(self.webpackChunklego=self.webpackChunklego||[]).push([[375],{88375:function(e,a,s){s.r(a),s.d(a,{default:function(){return A}});var n=s(29439),t=s(72791),r=s(20890),c=s(93517),i=s(43504),l=s(16088),o=s(53767),u=s(61889),d=s(98333),f=s(93433),h=s(86823),x=s(55818),j=s(3721),m=s(81131),Z=s(79012),g=s(85523),p=s(79174),v=s(555),N=s(80184);function y(e){var a=(0,t.useState)([]),s=(0,n.Z)(a,2),c=s[0],i=s[1],l=(0,t.useState)([]),o=(0,n.Z)(l,2),u=o[0],d=o[1],y=(0,t.useState)([]),w=(0,n.Z)(y,2),b=w[0],k=w[1],C=(0,t.useState)([]),S=(0,n.Z)(C,2),_=S[0],E=S[1],P=(0,t.useState)(!1),A=(0,n.Z)(P,2),I=A[0],F=A[1],G=function(e){F(!1),e.target.checked?d([].concat((0,f.Z)(u),[e.target.name])):d(u.filter((function(a){return a!==e.target.name})))},K=function(e){F(!1),e.target.checked?k([].concat((0,f.Z)(b),[e.target.value])):k(b.filter((function(a){return a!==e.target.value})))},$=function(e){F(!1),e.target.checked?E([].concat((0,f.Z)(_),[e.target.value])):E(_.filter((function(a){return a!==e.target.value})))};return(0,t.useEffect)((function(){e.handelFilterChange({priceRange:(0,f.Z)(u),category:(0,f.Z)(b),rating:(0,f.Z)(_)})}),[u,b,_]),(0,t.useEffect)((function(){(0,v.KQ)().then((function(e){return i(e.data.body)}))}),[]),(0,t.useEffect)((function(){I&&(d([]),k([]),E([]))}),[I]),(0,N.jsxs)("div",{className:"inner-filter",children:[(0,N.jsx)(h.Z,{onClick:function(){return F(!0)},disableGutters:!0,children:(0,N.jsx)(x.Z,{"aria-controls":"panel3a-content",id:"panel3a-header",children:(0,N.jsx)(r.Z,{children:"Reset All"})})}),(0,N.jsxs)(h.Z,{children:[(0,N.jsx)(x.Z,{expandIcon:(0,N.jsx)(m.Z,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:(0,N.jsx)(r.Z,{children:"Category"})}),(0,N.jsx)(j.Z,{children:(0,N.jsx)(Z.Z,{children:c.map((function(e){return(0,N.jsx)(g.Z,{name:e.name,control:(0,N.jsx)(p.Z,{checked:b.includes(String(e._id))}),label:e.name,value:e._id,onChange:K},e._id)}))})})]}),(0,N.jsxs)(h.Z,{children:[(0,N.jsx)(x.Z,{expandIcon:(0,N.jsx)(m.Z,{}),"aria-controls":"panel2a-content",id:"panel2a-header",children:(0,N.jsx)(r.Z,{children:"Price"})}),(0,N.jsxs)(j.Z,{children:[(0,N.jsx)(Z.Z,{children:(0,N.jsx)(g.Z,{name:"0-25",control:(0,N.jsx)(p.Z,{checked:u.includes("0-25")}),label:"0 - 25 EGP",value:"",onChange:G})}),(0,N.jsx)(Z.Z,{children:(0,N.jsx)(g.Z,{name:"26-50",control:(0,N.jsx)(p.Z,{checked:u.includes("26-50")}),label:"25 - 50 EGP",value:"",onChange:G})}),(0,N.jsx)(Z.Z,{children:(0,N.jsx)(g.Z,{name:"51-75",control:(0,N.jsx)(p.Z,{checked:u.includes("51-75")}),label:"50 - 75 EGP",value:"",onChange:G})}),(0,N.jsx)(Z.Z,{children:(0,N.jsx)(g.Z,{name:"76-100",control:(0,N.jsx)(p.Z,{checked:u.includes("76-100")}),label:"75 - 100 EGP",value:"",onChange:G})}),(0,N.jsx)(Z.Z,{children:(0,N.jsx)(g.Z,{name:"101-1000",control:(0,N.jsx)(p.Z,{checked:u.includes("101-1000")}),label:"Above 100 EGP",value:"",onChange:G})})]})]}),(0,N.jsxs)(h.Z,{children:[(0,N.jsx)(x.Z,{expandIcon:(0,N.jsx)(m.Z,{}),"aria-controls":"panel2a-content",id:"panel2a-header",children:(0,N.jsx)(r.Z,{children:"Rating"})}),(0,N.jsxs)(j.Z,{children:[(0,N.jsx)(Z.Z,{children:(0,N.jsx)(g.Z,{name:"up-1-star",control:(0,N.jsx)(p.Z,{checked:_.includes("1")}),label:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("i",{className:"fas fa-star yellow-star"}),(0,N.jsx)("i",{className:"fas fa-star gray-star"}),(0,N.jsx)("i",{className:"fas fa-star gray-star"}),(0,N.jsx)("i",{className:"fas fa-star gray-star"}),(0,N.jsx)("i",{className:"fas fa-star gray-star"})]}),value:"1",onChange:$})}),(0,N.jsx)(Z.Z,{children:(0,N.jsx)(g.Z,{name:"up-2-star",control:(0,N.jsx)(p.Z,{checked:_.includes("2")}),label:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("i",{className:"fas fa-star yellow-star"}),(0,N.jsx)("i",{className:"fas fa-star yellow-star"}),(0,N.jsx)("i",{className:"fas fa-star gray-star"}),(0,N.jsx)("i",{className:"fas fa-star gray-star"}),(0,N.jsx)("i",{className:"fas fa-star gray-star"})]}),value:"2",onChange:$})}),(0,N.jsx)(Z.Z,{children:(0,N.jsx)(g.Z,{name:"up-3-star",control:(0,N.jsx)(p.Z,{checked:_.includes("3")}),label:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("i",{className:"fas fa-star yellow-star"}),(0,N.jsx)("i",{className:"fas fa-star yellow-star"}),(0,N.jsx)("i",{className:"fas fa-star yellow-star"}),(0,N.jsx)("i",{className:"fas fa-star gray-star"}),(0,N.jsx)("i",{className:"fas fa-star gray-star"})]}),value:"3",onChange:$})}),(0,N.jsx)(Z.Z,{children:(0,N.jsx)(g.Z,{name:"up-4-star",control:(0,N.jsx)(p.Z,{checked:_.includes("4")}),label:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("i",{className:"fas fa-star yellow-star"}),(0,N.jsx)("i",{className:"fas fa-star yellow-star"}),(0,N.jsx)("i",{className:"fas fa-star yellow-star"}),(0,N.jsx)("i",{className:"fas fa-star yellow-star"}),(0,N.jsx)("i",{className:"fas fa-star gray-star"})]}),value:"4",onChange:$})}),(0,N.jsx)(Z.Z,{children:(0,N.jsx)(g.Z,{name:"up-5-star",control:(0,N.jsx)(p.Z,{checked:_.includes("5")}),label:(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("i",{className:"fas fa-star yellow-star"}),(0,N.jsx)("i",{className:"fas fa-star yellow-star"}),(0,N.jsx)("i",{className:"fas fa-star yellow-star"}),(0,N.jsx)("i",{className:"fas fa-star yellow-star"}),(0,N.jsx)("i",{className:"fas fa-star yellow-star"})]}),value:"5",onChange:$})})]})]})]})}var w=s(1413),b=s(16030),k=s(16871),C=s(66303),S=s(24551),_=s(48280);function E(e){var a,s=e.isAdmin,r=e.product,c=(0,b.I0)(),i=(0,k.s0)(),l=(0,t.useState)(!1),o=(0,n.Z)(l,2),u=o[0],d=o[1],h=(0,t.useState)(!1),x=(0,n.Z)(h,2),j=x[0],m=x[1],Z=(0,t.useState)([]),g=(0,n.Z)(Z,2),p=g[0],v=g[1];(0,t.useEffect)((function(){return s||(0,S.KA)().then((function(e){var a=e.data.wishlist.map((function(e){return e._id}));a.includes(r._id)&&d(!0),v(a)})),function(){}}),[]);(0,t.useEffect)((function(){return m(!0),function(){}})),(0,t.useEffect)((function(){return j&&y(),function(){}}),[u]);var y=function(){if(!s)if(u){p.filter((function(e){return e!==r._id}));!function(e){s||(localStorage.getItem("token")?(0,S.s3)(e).then((function(){v((function(a){return[].concat((0,f.Z)(a),[e._id])}))})):i("/login"))}(r)}else!function(e){s||(localStorage.getItem("token")?(0,S.$$)(e).then((function(){var a=p.filter((function(a){return a!==e._id}));v(a)})):i("/login"))}(r)};return(0,N.jsxs)("div",{className:"card",children:[(0,N.jsxs)("div",{className:"add-to-wishlist",children:[(0,N.jsx)("span",{onClick:y,children:(0,N.jsx)("i",{onClick:function(e){e.stopPropagation(),d((function(e){return!e}))},className:u||p.includes(r._id)?"fa fa-heart":"far fa-heart"})}),(0,N.jsx)("span",{children:"Add to wish list"})]}),(0,N.jsx)("div",{className:"image-container",style:{width:"100%",overflow:"hidden"},children:(0,N.jsx)("img",{alt:"",src:"http://localhost:8080/images/".concat(null===r||void 0===r||null===(a=r.images)||void 0===a?void 0:a[0]),className:"product-card-img",style:{cursor:"pointer"},onClick:function(){return i("/card",{state:{_id:r._id}})}})}),(0,N.jsx)("div",{className:"card-name",children:(0,N.jsx)("p",{onClick:function(){return i("/card",{state:{_id:r._id}})},style:{cursor:"pointer"},children:r.name})}),(0,N.jsx)("span",{children:(0,N.jsx)(_.Z,{count:r.rating})}),(0,N.jsxs)("div",{className:"card-price",children:[r.price," EGP"]}),(0,N.jsx)("button",{className:"card-button-exist",onClick:function(){s||(localStorage.getItem("token")?c((0,C.A4)((0,w.Z)({},r))):i("/login"))},children:"Add to Bag"})]})}var P=s(30456);function A(){var e=(0,t.useState)(1),a=(0,n.Z)(e,2),s=a[0],f=a[1],h=(0,t.useState)(1),x=(0,n.Z)(h,2),j=x[0],m=x[1],Z=(0,t.useState)([]),g=(0,n.Z)(Z,2),p=g[0],w=g[1],b=(0,t.useState)({}),k=(0,n.Z)(b,2),C=k[0],_=k[1],A=(0,t.useState)([]),I=(0,n.Z)(A,2),F=(I[0],I[1]),G=(0,t.useState)((function(){return!!localStorage.getItem("token")&&"admin"===(0,P.Z)(localStorage.getItem("token")).role})),K=(0,n.Z)(G,2),$=K[0];K[1];(0,t.useEffect)((function(){return console.log($),$&&(0,S.KA)().then((function(e){var a=e.data.wishlist.map((function(e){return e._id}));F(a)})),function(){}}),[]);(0,t.useEffect)((function(){return(0,v.wv)(12,s,C).then((function(e){w(e.data.products),m(e.data.count)})).catch((function(e){})),function(){}}),[s]),(0,t.useEffect)((function(){return(0,v.wv)(12,s,C).then((function(e){w(e.data.products),m(e.data.count),f(1)})).catch((function(e){})),function(){}}),[C]);return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:"shop-container",children:[(0,N.jsx)("div",{role:"presentation",className:"breadcrumbs",onClick:function(e){e.preventDefault()},children:(0,N.jsxs)(c.Z,{separator:(0,N.jsx)(d.Z,{fontSize:"small"}),sx:{pt:1},"aria-label":"breadcrumb",children:[(0,N.jsx)(i.OL,{underline:"hover",color:"inherit",to:"/",children:(0,N.jsx)(r.Z,{color:"#006db7",children:"Home"})}),(0,N.jsx)(r.Z,{color:"text.primary",children:"Shop Now"})]})}),(0,N.jsxs)("section",{className:"shop-now ",children:[(0,N.jsx)("div",{className:"filter",children:(0,N.jsx)(y,{handelFilterChange:function(e){_(e)}})}),(0,N.jsxs)("section",{className:"cards",children:[(0,N.jsx)("div",{className:"cards-header-section",children:(0,N.jsxs)("span",{children:["Showing ",j<12?j:12," of ",j," Products"]})}),(0,N.jsx)(u.ZP,{container:!0,sx:{display:"flex",alignItems:"stretch"},children:p.map((function(e){return(0,N.jsx)(u.ZP,{item:!0,xs:12,sm:6,md:4,lg:3,children:(0,N.jsx)(E,{isAdmin:$,product:e})},e._id)}))}),(0,N.jsx)("div",{className:"sliding",children:(0,N.jsx)(o.Z,{spacing:2,children:(0,N.jsx)(l.Z,{count:Math.ceil(j/12)||1,card:s,onChange:function(e,a){f(a)}})})})]})]})]})})}},48280:function(e,a,s){s.d(a,{Z:function(){return t}});s(72791);var n=s(80184);function t(e){return(0,n.jsx)("p",{className:"review-stars-container",children:function(e){var a=[];if(e){for(var s=0;s<e;s++)a.push((0,n.jsx)("i",{className:"fas fa-star yellow-star"},s));for(var t=e;t<5;t++)a.push((0,n.jsx)("i",{className:"fas fa-star gray-star"},t))}return a}(e.count)})}},555:function(e,a,s){s.d(a,{KQ:function(){return c},rh:function(){return t},wv:function(){return r}});var n=s(66614),t=function(e){return n.b.post("/product",{id:e})},r=function(e,a,s){return n.b.get("/shop",{params:{limit:e,page:a,filter:s}})},c=function(){return n.b.get("/dashboard/category")}},24551:function(e,a,s){s.d(a,{$$:function(){return c},KA:function(){return t},s3:function(){return r}});var n=s(66614),t=function(){return n.b.get("/wishlist")},r=function(e){return n.b.put("/wishlist",{wishlist:e._id})},c=function(e){return n.b.put("/deleteFromWishlist ",{wishlist:e._id})}}}]);
//# sourceMappingURL=375.e564e3df.chunk.js.map